<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="manual_title">User Manual ‚Äì OpenAPS AIMI</string>
    <string name="manual_intro">Welcome to AIMI (Adaptive Insulin Management Intelligence), the predictive engine for AndroidAPS that combines machine learning, physiological monitoring, and advanced safeguards to drive basal and SMB (Super Micro-Bolus). AIMI observes your glucose history, boluses, steps/heart rate, and declared modes to dynamically adjust sensitivity, insulin duration of action, and micro-boluses, while maintaining historic OpenAPS safety features.\n\nAIMI is not a black box: think of it as a co-pilot. The cleaner your data (up-to-date profile, meal entries, closed night loops), the better AIMI anticipates and stabilizes your glucose levels.</string>

    <string name="manual_section_1_title">1. Installation and Activation</string>
    <string name="manual_section_1_content">1. **Activate the plugin** from *Config ‚ñ∂Ô∏è Plugins ‚ñ∂Ô∏è APS* and check **OpenAPS AIMI**. AIMI automatically checks if your pump supports temporary basals.\n2. **Restart the loop**: upon startup, AIMI reloads your past variable sensitivities and installs its Kalman/PK-PD calculator.\n3. **Allow permissions**: if you enable steps/HR, ensure your Wear OS watch syncs correctly to AAPS.\n4. **Check status**\n   - OpenAPS screen shows *AIMI Algorithm* and last run date.\n   - Logs contain `AIMI+` reasons when adaptive basal triggers a kicker or micro-resume.\n   - Status columns `SMB`/`Basal` show WCycle or NightGrowth multipliers when active.</string>

    <string name="manual_section_2_title">2. General Principles</string>
    <string name="manual_section_2_content">- **Full Loop**: AIMI retrieves `GlucoseStatusAIMI`, calculates a basal plan via `BasalPlanner`, applies `AIMIAdaptiveBasal` for plateaus, and adjusts SMBs via PK/PD and adaptive ISF.\n- **Continuous Learning**: PK/PD parameters (DIA and peak time) are updated when enough IOB is available, unless sport or late fats are detected.\n- **Useful Logs**: `rT.reason` includes triggers (plateau kicker, NGR, WCycle). AIMI CSVs (`AAPS/oapsaimi*.csv`) record every decision for later analysis.</string>

    <string name="manual_section_3_title">3. üîß General Settings</string>
    <string name="manual_section_3_content">These parameters set the physiological baseline used by all AIMI bricks.\n\n**üîπ OApsAIMIMLtraining**\n- **Goal:** allow local SMB model training.\n- **Adjust if:** Frequent hypos (disable), Frequent hypers (enable).\n\n**üîπ OApsAIMIweight, OApsAIMICHO, OApsAIMITDD7**\n- **Goal:** provide physiological bounds to initialize the ISF Kalman filter.\n- **Adjust:** Hypos (increase weight/TDD), Hypers (adjust CHO).\n\n**üîπ AimiUamConfidence**\n- **Goal:** weight "UAM" learning.\n- **Adjust:** Post-UAM hypos (increase), Prolonged hypers (reduce).\n\n**üîπ OApsAIMIautoDrive**\n- **Goal:** enable automatic use of mode factors and combined profile.</string>

    <string name="manual_section_4_title">4. ‚öôÔ∏è Basal Regulation &amp; SMB</string>
    <string name="manual_section_4_content">AIMI simultaneously controls temporary basal and SMB intensity.\n\n**Global SMB Parameters**\n- `OApsAIMIMaxSMB`: standard SMB cap.\n- `OApsAIMIHighBGMaxSMB`: SMB cap in high plateau.\n- `autodriveMaxBasal`: autoDrive basal cap.\n\n**AIMIAdaptiveBasal**\n- `OApsAIMIHighBg` (180): triggers kicks.\n- `OApsAIMIPlateauBandAbs`: variation tolerance.\n- `OApsAIMIZeroResumeMin`: resumes low basal after stop to prevent rebound.</string>

    <string name="manual_section_5_title">5. üß† Adaptive Intelligence</string>
    <string name="manual_section_5_content">**Dynamic PK/PD**\n- AIMI merges profile/TDD ISF with PK/PD estimation.\n- Meal Priority: when meal modes are active, SMB guards are relaxed.\n\n**Adaptive ISF Adjustment**\n- Recalculates target ISF while limiting change to ¬±5% per loop.\n\n**Dynamic PeakTime**\n- Combines IOB, future activity, steps, HR to adjust peak time between 35 and 120 min.</string>

    <string name="manual_section_6_title">6. üí° Modes &amp; Meal Detection</string>
    <string name="manual_section_6_content">**Daily Factors**\n- `MorningFactor`, `AfternoonFactor`, `EveningFactor` weight SMB by time.\n\n**Specific Meal Modes**\n- Each mode (Breakfast, Lunch, Dinner) has its own prebolus and factors.\n- `OApsAIMIHyperFactor` strengthens SMB if BG>180.\n\n**AutoDrive Prebolus**\n- Limits for automatic micro-preboluses when `autoDrive` is active.</string>

    <string name="manual_section_7_title">7. üí™ Exercise &amp; Safety Rules</string>
    <string name="manual_section_7_content">**Physiological Toggles**\n- `OApsAIMIpregnancy`, `OApsAIMIhoneymoon`: specific adjustments.\n\n**Sport Detection**\n- Cuts SMB when steps/HR indicate intense activity or target >140.\n- Halves SMB if sleep/snack/prolonged low activity.</string>

    <string name="manual_section_8_title">8. üåô Night Mode &amp; Growth</string>
    <string name="manual_section_8_content">**Classic Night Mode**\n- `OApsAIMIsleepFactor` moderates SMB at night.\n\n**Night Growth Resistance (NGR)**\n- Manages growth hormone spikes in children/teens.\n- Automatically learns thresholds and multipliers.</string>

    <string name="manual_section_9_title">9. ‚ù§Ô∏è Wear OS Integration</string>
    <string name="manual_section_9_content">**Activation:** `OApsAIMIEnableStepsFromWatch`.\n\n**Effects:**\n- Intense activity (>1000 steps, HR>110): lengthens peak and limits SMB.\n- Rest: shortens peak to avoid delays.</string>

    <string name="manual_section_10_title">10. ‚ôÄÔ∏è WCycle ‚Äì Menstrual Cycle</string>
    <string name="manual_section_10_content">AIMI adapts basal and SMB according to your menstrual phase.\n- **Activation:** `OApsAIMIwcycle`.\n- **Operation:** adjusts multipliers by phase (e.g., +12% in luteal phase).</string>

    <string name="manual_section_11_title">11. Quick Adjustment Tips</string>
    <string name="manual_section_11_content">**Post-SMB Hypos:** ‚Üì `OApsAIMIMaxSMB`, ‚Üë `OApsAIMISmbTailDamping`.\n**Night Hypos:** ‚Üë `OApsAIMIZeroResumeMin`, ‚Üì `NightGrowthBasalMultiplier`.\n**Post-Meal Hypers:** ‚Üë meal factors, ‚Üì `OApsAIMIPkpdBoundsPeakMinMax`.\n**Plateau Hyper:** ‚Üë `OApsAIMIKickerStep`.</string>

    <string name="manual_section_12_title">12. üçΩÔ∏è How to Create Meal Mode Buttons</string>
    <string name="manual_section_12_content">**Method: Using Automation + Careportal**\n\n1. Go to **Automation** tab\n2. Create **New Rule**\n3. **Name the rule** (e.g., \"AIMI Breakfast\")\n4. **Trigger**: Check **\"User action\"**\n5. In **Action**: Select **\"Careportal\"**\n6. **Mode name**: Enter the desired mode code:\n   ‚Ä¢ `bfast`: Breakfast\n   ‚Ä¢ `lunch`: Lunch\n   ‚Ä¢ `dinner`: Dinner\n   ‚Ä¢ `highcarb`: High Carb (pizza, pasta)\n   ‚Ä¢ `snack`: Snack\n   ‚Ä¢ `meal`: Generic meal\n   ‚Ä¢ `sport`: Sport mode\n   ‚Ä¢ `stop`: Stop current mode\n   ‚Ä¢ `sleep`: Sleep mode\n7. **Duration**:\n   ‚Ä¢ **60 or 90 minutes** for normal meal modes\n   ‚Ä¢ **5 minutes REQUIRED** for `stop` mode (cancels current mode)\n8. **Save** the rule\n9. Repeat for each desired mode\n\n‚ö†Ô∏è **Important**:\n‚Ä¢ **Refresh the loop** (pull-to-refresh on main screen) can activate the mode faster\n‚Ä¢ **Without active CGM readings**, prebolus will **NOT be sent** because the loop doesn\'t refresh without CGM data</string>

    <string name="manual_section_13_title">13. üõ°Ô∏è AIMI Auditor</string>
    <string name="manual_section_13_content">**Real-time safety system that audits every insulin decision before execution.**\n\n**What It Does:**\nThe AI Auditor is an **independent second brain** that verifies all AIMI decisions.\n\n**Checks Performed:**\n\n‚úÖ **Hypoglycemia risk assessment**:\n  ‚Ä¢ Analysis of current BG and trends\n  ‚Ä¢ Calculation of total IOB (Insulin On Board)\n  ‚Ä¢ Prediction of future BG (30-120 minutes)\n\n‚úÖ **IOB saturation**:\n  ‚Ä¢ Checks if too much insulin is already active\n  ‚Ä¢ Detects dangerous insulin stacking\n  ‚Ä¢ Respects configured Max IOB limits\n\n‚úÖ **Delta trend analysis**:\n  ‚Ä¢ Evaluates glycemic change velocity\n  ‚Ä¢ Detects rapid drops (hypo risk)\n  ‚Ä¢ Identifies rapid rises\n\n**Verdict Types:**\n‚Ä¢ ‚úÖ **APPROVED**: Dose is safe, immediate execution\n‚Ä¢ ‚ö†Ô∏è **APPROVED_WITH_REDUCTION**: Dose reduced for safety (e.g., -30%)\n‚Ä¢ ‚ùå **REJECTED**: Dose blocked, too dangerous\n\n**Auditor verifies:**\n‚Ä¢ All SMB (Super Micro Bolus)\n‚Ä¢ All preboluses from meal modes\n‚Ä¢ All temporary basal adjustments\n‚Ä¢ All recommendations from AIMI Advisor</string>

    <string name="manual_section_14_title">14. üéØ AIMI Trajectory</string>
    <string name="manual_section_14_content">**Advanced prediction system that anticipates your future blood glucose.**\n\n**What It Does:**\n\n‚Ä¢ **Calculates glycemic trajectory** over 30-180 minutes\n‚Ä¢ **Integrates all active factors**:\n  - IOB (Insulin On Board) with PKPD model\n  - COB (Carbs On Board) with dynamic absorption\n  - Current Delta trends\n  - Active temporary basal\n  - Context (exercise, stress, etc.)\n\n‚Ä¢ **Adjusts decisions in real-time**:\n  - Anticipated prebolus if rise predicted\n  - Reduction/stop if hypo predicted\n  - Optimal insulin timing\n\n**Display:**\nYou can see predicted trajectory in:\n‚Ä¢ AIMI logs (OpenAPS tab)\n‚Ä¢ Prediction curve on main graph\n‚Ä¢ Decision details (tap notification)</string>

    <string name="manual_section_15_title">15. üß¨ PKPD (Pharmacokinetic/Pharmacodynamic)</string>
    <string name="manual_section_15_content">**Advanced model of insulin absorption and action.**\n\n**What is PKPD?**\nInstead of using a fixed DIA curve, PKPD models insulin **dynamically**.\n\n**Pharmacokinetic (PK)** - How insulin is absorbed:\n‚Ä¢ Variable absorption rate based on:\n  - Insulin type (Fiasp, NovoRapid, Humalog)\n  - Injection site (abdomen, arm, thigh)\n  - Body temperature (exercise = faster absorption)\n  - Local blood flow\n\n**Pharmacodynamic (PD)** - How insulin acts:\n‚Ä¢ Variable effect on BG based on:\n  - Current sensitivity (dynamic ISF)\n  - Receptor saturation (high IOB = reduced effect)\n  - Temporary resistance (stress, illness)\n\n**PKPD Advantages:**\n‚úÖ More accurate predictions: Realistic model of insulin action\n‚úÖ Adapts to situations: Detects saturation and adjusts\n‚úÖ Better meal management: Optimal bolus timing\n‚úÖ Less stacking: Detects \"hidden\" insulin still active\n\n**Configurable Parameters:**\n‚Ä¢ Insulin type (ultra-rapid vs rapid)\n‚Ä¢ Peak action (25-75 minutes)\n‚Ä¢ Effective DIA (3-7 hours)\n‚Ä¢ Saturation factor</string>

    <string name="manual_section_16_title">16. Troubleshooting</string>
    <string name="manual_section_16_content">1. **Read `rT.reason`**: look for `AIMI+` phrases.\n2. **AIMI CSV**: `_records.csv` contains all variables.\n3. **PK/PD**: check `PkpdEnabled` is ON.\n4. **No SMB**: check `isCriticalSafetyCondition` safeguards.</string>
</resources>
